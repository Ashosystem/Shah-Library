<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Idries Shah Library</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="header-title">The Idries Shah Library</h1>
                <p class="header-subtitle">Free online access to the complete works ‚Ä¢ <a href="https://idriesshahfoundation.org/" target="_blank" rel="noopener">The Idries Shah Foundation</a></p>
            </div>
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="Search books and chapters...">
                <button class="search-clear" id="search-clear" aria-label="Clear search">√ó</button>
                <button class="search-btn" id="search-btn" title="Search ">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.35-4.35"></path>
                </svg>
                </button>
            </div>


            <!-- Add this button next to your search input or in the header -->
        <button id="random-story-btn" class="btn btn--primary" >
            A Thought for Me üìú
        </button>
        </div>

    </header>

        <!-- Search Results Overlay -->
    <div class="search-overlay" id="search-overlay">
        <div class="search-results" id="search-results" style="display: none;">
          <div class="search-results-header">
            <h3>Search Results</h3>
            <button class="search-results-close" id="search-results-close" aria-label="Close search results">√ó</button>
          </div>
        <div class="results-container" id="results-container"></div>
    </div>
    </div>

           <!-- Perplexity Search Section - NEW -->


    <main class="main">
        <div class="container">
            <section class="scatter-info">
                <div class="scatter-card">
                <!--    <h2>The Scatter Approach (NASHR)</h2> -->
                    <p>Here you will find the complete, unaltered works that Shah chose to publish during his lifetime.
                    These are the instruments he expected to go on doing their work as his legacy.<br>
                    There is no programme to sign up to here, and no approved way to begin.
                    As he suggested - laugh at a joke, enjoy a story, or plunge deeply into a study of his work. All are welcome.<br>
                    The materials are designed to give each person something unique to them, depending on time, place and person.<br>
                    If you want a point of entry, you might:
                    <ul><li>Use the search box to look for a book title, a name, or a phrase that interests you.</li>
                        <li>Browse full books by subject using the buttons below.</li>
                        <li>Press the ‚ÄúThought for me‚Äù button and read the passage that randomly appears.</li></ul>
                    Shah often said that what is needed varies from person to person, and from moment to moment, and that selection itself can be part of the learning.
                    <br>Give it a go and see what‚Äôs here for you today.
                    </p>
                    <!--<p>This library is organized using the scatter principle - approaching student needs from many different directions with no fixed hierarchy. Start anywhere based on your temperament and interests. The same materials work differently for different readers, and patterns emerge over time through exposure.</p>-->
                    <!--<ul class="scatter-points">
                        <li>No hierarchy - start anywhere</li>
                        <li>Multiple entry points based on temperament</li>
                        <li>Patterns emerge through exposure over time</li>
                    </ul>-->
                </div>
            </section>

            <!-- <section class="perplexity-search-section">
            <div class="search-container">
                <h2 class="search-title">Ask About Idries Shah's Works</h2>
                <p class="search-description">Get AI-powered insights about Sufism, teaching stories, and Idries Shah's philosophy - EXPERIMENTAL FEATURE</p>

                <div class="search-input-wrapper">
                    <textarea
                        id="perplexityQuery"
                        class="search-textarea"
                        placeholder="Ask a question about Idries Shah's teachings, Sufism, or any book in the library..."
                        rows="3"
                    ></textarea>
                    <button id="searchBtn" class="btn btn--primary search-btn">
                        <span class="btn-text">Search</span>
                        <span class="btn-loader" style="display: none;">Searching...</span>
                    </button>
                </div>

                - Response Area
                <div id="searchResponse" class="search-response" style="display: none;">
                    <div class="response-header">
                        <h3 class="response-title">Response</h3>
                        <button id="clearResponse" class="btn btn--sm btn--secondary">Clear</button>
                    </div>
                    <div id="responseContent" class="response-content"></div>
                </div>
            </div>
        </section> -->

            <section class="library-content" id="library-content">
                <div class="categories-grid" id="categories-grid">
                    <!-- Categories will be populated by JavaScript -->
                </div>
            </section>


        </div>
    </main>

    <!-- Book Detail Modal -->
    <div class="modal hidden" id="book-modal">
        <div class="modal-backdrop" id="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-book-title"></h2>
                <button class="modal-close" id="modal-close" aria-label="Close modal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="book-meta">
                    <p class="book-description" id="modal-book-description"></p>
                    <div class="book-actions">
                        <a href="#" id="modal-read-full" class="btn btn--primary" target="_blank" rel="noopener">
                            <span class="external-icon">üìñ</span>
                            Read Full Book Online
                        </a>
                        <a href="#" id="modal-book-info" class="btn btn--outline" target="_blank" rel="noopener">
                            <span class="external-icon">üîó</span>
                            View Book Information Page
                        </a>
                    </div>
                </div>
                <div class="chapters-section" id="modal-chapters-section" style="display: none;">
                    <h3>Table of Contents</h3>
                    <div class="chapters-list" id="modal-chapters-list">
                        <!-- Chapters will be populated here -->
                    </div>
                </div>
                <div class="book-note" id="modal-book-note" style="display: none;">
                    <p class="note-text"></p>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 <a href="https://idriesshahfoundation.org/" target="_blank" rel="noopener">The Idries Shah Foundation</a> - All books are available to read for free online</p>
        </div>
    </footer>

    <script src="app.js"></script>

</body>
</html>

